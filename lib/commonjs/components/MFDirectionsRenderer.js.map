{"version":3,"names":["viewPropTypes","ViewPropTypes","View","propTypes","routes","PropTypes","arrayOf","shape","latitude","number","isRequired","longitude","directions","string","activedIndex","activeStrokeWidth","activeStrokeColor","ColorPropType","activeOutlineWidth","activeOutlineColor","inactiveStrokeWidth","inactiveStrokeColor","inactiveOutlineWidth","inactiveOutlineColor","originPOIOptions","coordinate","icon","uri","any","title","titleColor","visible","bool","destinationPOIOptions","onPress","func","MFDirectionsRenderer","React","Component","constructor","props","_ref","bind","_onPress","setActivedIndex","index","_runCommand","setRoutes","setDirections","render","processColor","Image","resolveAssetSource","ref","renderer","event","stopPropagation","name","args","Platform","OS","NativeModules","UIManager","dispatchViewManagerCommand","_getHandle","_uiManagerCommand","_mapManagerCommand","findNodeHandle","componentName","getViewManagerConfig","Commands","RMFDirectionsRenderer","requireNativeComponent"],"sources":["MFDirectionsRenderer.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  requireNativeComponent,\n  Platform,\n  Image,\n  NativeModules,\n  ViewPropTypes,\n  ColorPropType,\n  findNodeHandle,\n  processColor\n} from 'react-native';\n\nconst viewPropTypes = ViewPropTypes || View.propTypes;\n\nconst propTypes = {\n  ...viewPropTypes,\n\n  /**\n   * The directions to display on the map,\n   * retrieved as an array of array of coordinates to describe the routes.\n   * Similar to directions prop but has higher priority\n   */\n  routes: PropTypes.arrayOf(\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        latitude: PropTypes.number.isRequired,\n        longitude: PropTypes.number.isRequired,\n      })\n    )\n  ),\n\n  /**\n   * The directions to display on the map,\n   * retrieved as a json string from Get route Map4D API (/sdk/route).\n   * Similar to routes prop but with lower priority\n   */\n  directions: PropTypes.string,\n\n  /**\n   * The index of the main route, default value is 0.\n   */\n  activedIndex: PropTypes.number,\n\n  /**\n   * The active route stroke width.\n   */\n  activeStrokeWidth: PropTypes.number,\n\n  /**\n   * The active route color.\n   */\n  activeStrokeColor: ColorPropType,\n\n  /**\n   * The active route outline stroke width.\n   */\n  activeOutlineWidth: PropTypes.number,\n\n  /**\n   * The active route outline color.\n   */\n  activeOutlineColor: ColorPropType,\n\n  /**\n   * The inactive route stroke width.\n   */\n  inactiveStrokeWidth: PropTypes.number,\n\n  /**\n   * The inactive route color.\n   */\n  inactiveStrokeColor: ColorPropType,\n\n  /**\n   * The inactive route outline stroke width.\n   */\n  inactiveOutlineWidth: PropTypes.number,\n\n  /**\n   * The inactive route outline color.\n   */\n  inactiveOutlineColor: ColorPropType,\n\n  /**\n   * The options of the origin POI.\n   */\n  originPOIOptions: PropTypes.shape({\n    coordinate: PropTypes.shape({\n      latitude: PropTypes.number.isRequired,\n      longitude: PropTypes.number.isRequired,\n    }),\n\n    icon: PropTypes.shape({\n      uri: PropTypes.any.isRequired\n    }),\n\n    title: PropTypes.string,\n\n    titleColor: ColorPropType,\n\n    visible: PropTypes.bool,\n  }),\n\n  /**\n   * The options of the destination POI.\n   */\n  destinationPOIOptions: PropTypes.shape({\n    coordinate: PropTypes.shape({\n      latitude: PropTypes.number.isRequired,\n      longitude: PropTypes.number.isRequired,\n    }),\n\n    icon: PropTypes.shape({\n      uri: PropTypes.any.isRequired\n    }),\n\n    title: PropTypes.string,\n\n    titleColor: ColorPropType,\n\n    visible: PropTypes.bool,\n  }),\n\n  /**\n   * Callback that is called when the user presses on the routes.\n   */\n  onPress: PropTypes.func,\n};\n\nclass MFDirectionsRenderer extends React.Component {\n  constructor(props) {\n    super(props)\n    this._ref = this._ref.bind(this)\n    this._onPress = this._onPress.bind(this)\n  }\n\n  setActivedIndex(index) {\n    this._runCommand(\"setActivedIndex\", [index])\n  }\n\n  setRoutes(routes) {\n    this._runCommand(\"setRoutes\", [routes])\n  }\n\n  setDirections(directions) {\n    this._runCommand(\"setDirections\", [directions])\n  }\n\n  render() {\n    let originPOIOptions = this.props.originPOIOptions\n    if (originPOIOptions) {\n      if (originPOIOptions.titleColor) {\n        originPOIOptions.titleColor = processColor(originPOIOptions.titleColor)\n      }\n      if (originPOIOptions.icon) {\n        let uri = Image.resolveAssetSource(originPOIOptions.icon.uri) || {uri: originPOIOptions.icon.uri};\n        originPOIOptions.icon = {uri: uri.uri}\n      }\n    }\n\n    let destinationPOIOptions = this.props.destinationPOIOptions\n    if (destinationPOIOptions) {\n      if (destinationPOIOptions.titleColor) {\n        destinationPOIOptions.titleColor = processColor(destinationPOIOptions.titleColor)\n      }\n      if (destinationPOIOptions.icon) {\n        let uri = Image.resolveAssetSource(destinationPOIOptions.icon.uri) || {uri: destinationPOIOptions.icon.uri};\n        destinationPOIOptions.icon = {uri: uri.uri}\n      }\n    }\n\n    return <RMFDirectionsRenderer\n      {...this.props}\n      originPOIOptions={originPOIOptions}\n      destinationPOIOptions={destinationPOIOptions}\n      ref={this._ref}\n      onPress={this._onPress}\n    />;\n  }\n\n  _ref(ref) {\n    this.renderer = ref;\n  }\n\n  _onPress(event) {\n    event.stopPropagation();\n      if (this.props.onPress) {\n        this.props.onPress(event);\n    }\n  }\n\n  _runCommand(name, args) {\n    switch (Platform.OS) {\n      case 'android':\n        NativeModules.UIManager.dispatchViewManagerCommand(\n          this._getHandle(),\n          this._uiManagerCommand(name),\n          args\n        );\n        break;\n\n      case 'ios':\n        this._mapManagerCommand(name)(this._getHandle(), ...args);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _getHandle() {\n    return findNodeHandle(this.renderer);\n  }\n\n  _uiManagerCommand(name) {\n    const UIManager = NativeModules.UIManager;\n    const componentName = \"RMFDirectionsRenderer\";\n\n    if (!UIManager.getViewManagerConfig) {\n      // RN < 0.58\n      return UIManager[componentName].Commands[name];\n    }\n\n    // RN >= 0.58        \n    return UIManager.getViewManagerConfig(componentName).Commands[name];\n  }\n\n  _mapManagerCommand(name) {\n    return NativeModules[`RMFDirectionsRenderer`][name];\n  }\n}\n\nMFDirectionsRenderer.propTypes = propTypes;\n\nvar RMFDirectionsRenderer = requireNativeComponent(`RMFDirectionsRenderer`, MFDirectionsRenderer);\n\nexport { MFDirectionsRenderer }\n"],"mappings":"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"}