{"version":3,"names":["React","PropTypes","requireNativeComponent","Platform","Image","NativeModules","ViewPropTypes","ColorPropType","findNodeHandle","processColor","viewPropTypes","View","propTypes","routes","arrayOf","shape","latitude","number","isRequired","longitude","directions","string","activedIndex","activeStrokeWidth","activeStrokeColor","activeOutlineWidth","activeOutlineColor","inactiveStrokeWidth","inactiveStrokeColor","inactiveOutlineWidth","inactiveOutlineColor","originPOIOptions","coordinate","icon","uri","any","title","titleColor","visible","bool","destinationPOIOptions","onPress","func","MFDirectionsRenderer","Component","constructor","props","_ref","bind","_onPress","setActivedIndex","index","_runCommand","setRoutes","setDirections","render","resolveAssetSource","ref","renderer","event","stopPropagation","name","args","OS","UIManager","dispatchViewManagerCommand","_getHandle","_uiManagerCommand","_mapManagerCommand","componentName","getViewManagerConfig","Commands","RMFDirectionsRenderer"],"sources":["MFDirectionsRenderer.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  requireNativeComponent,\n  Platform,\n  Image,\n  NativeModules,\n  ViewPropTypes,\n  ColorPropType,\n  findNodeHandle,\n  processColor\n} from 'react-native';\n\nconst viewPropTypes = ViewPropTypes || View.propTypes;\n\nconst propTypes = {\n  ...viewPropTypes,\n\n  /**\n   * The directions to display on the map,\n   * retrieved as an array of array of coordinates to describe the routes.\n   * Similar to directions prop but has higher priority\n   */\n  routes: PropTypes.arrayOf(\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        latitude: PropTypes.number.isRequired,\n        longitude: PropTypes.number.isRequired,\n      })\n    )\n  ),\n\n  /**\n   * The directions to display on the map,\n   * retrieved as a json string from Get route Map4D API (/sdk/route).\n   * Similar to routes prop but with lower priority\n   */\n  directions: PropTypes.string,\n\n  /**\n   * The index of the main route, default value is 0.\n   */\n  activedIndex: PropTypes.number,\n\n  /**\n   * The active route stroke width.\n   */\n  activeStrokeWidth: PropTypes.number,\n\n  /**\n   * The active route color.\n   */\n  activeStrokeColor: ColorPropType,\n\n  /**\n   * The active route outline stroke width.\n   */\n  activeOutlineWidth: PropTypes.number,\n\n  /**\n   * The active route outline color.\n   */\n  activeOutlineColor: ColorPropType,\n\n  /**\n   * The inactive route stroke width.\n   */\n  inactiveStrokeWidth: PropTypes.number,\n\n  /**\n   * The inactive route color.\n   */\n  inactiveStrokeColor: ColorPropType,\n\n  /**\n   * The inactive route outline stroke width.\n   */\n  inactiveOutlineWidth: PropTypes.number,\n\n  /**\n   * The inactive route outline color.\n   */\n  inactiveOutlineColor: ColorPropType,\n\n  /**\n   * The options of the origin POI.\n   */\n  originPOIOptions: PropTypes.shape({\n    coordinate: PropTypes.shape({\n      latitude: PropTypes.number.isRequired,\n      longitude: PropTypes.number.isRequired,\n    }),\n\n    icon: PropTypes.shape({\n      uri: PropTypes.any.isRequired\n    }),\n\n    title: PropTypes.string,\n\n    titleColor: ColorPropType,\n\n    visible: PropTypes.bool,\n  }),\n\n  /**\n   * The options of the destination POI.\n   */\n  destinationPOIOptions: PropTypes.shape({\n    coordinate: PropTypes.shape({\n      latitude: PropTypes.number.isRequired,\n      longitude: PropTypes.number.isRequired,\n    }),\n\n    icon: PropTypes.shape({\n      uri: PropTypes.any.isRequired\n    }),\n\n    title: PropTypes.string,\n\n    titleColor: ColorPropType,\n\n    visible: PropTypes.bool,\n  }),\n\n  /**\n   * Callback that is called when the user presses on the routes.\n   */\n  onPress: PropTypes.func,\n};\n\nclass MFDirectionsRenderer extends React.Component {\n  constructor(props) {\n    super(props)\n    this._ref = this._ref.bind(this)\n    this._onPress = this._onPress.bind(this)\n  }\n\n  setActivedIndex(index) {\n    this._runCommand(\"setActivedIndex\", [index])\n  }\n\n  setRoutes(routes) {\n    this._runCommand(\"setRoutes\", [routes])\n  }\n\n  setDirections(directions) {\n    this._runCommand(\"setDirections\", [directions])\n  }\n\n  render() {\n    let originPOIOptions = this.props.originPOIOptions\n    if (originPOIOptions) {\n      if (originPOIOptions.titleColor) {\n        originPOIOptions.titleColor = processColor(originPOIOptions.titleColor)\n      }\n      if (originPOIOptions.icon) {\n        let uri = Image.resolveAssetSource(originPOIOptions.icon.uri) || {uri: originPOIOptions.icon.uri};\n        originPOIOptions.icon = {uri: uri.uri}\n      }\n    }\n\n    let destinationPOIOptions = this.props.destinationPOIOptions\n    if (destinationPOIOptions) {\n      if (destinationPOIOptions.titleColor) {\n        destinationPOIOptions.titleColor = processColor(destinationPOIOptions.titleColor)\n      }\n      if (destinationPOIOptions.icon) {\n        let uri = Image.resolveAssetSource(destinationPOIOptions.icon.uri) || {uri: destinationPOIOptions.icon.uri};\n        destinationPOIOptions.icon = {uri: uri.uri}\n      }\n    }\n\n    return <RMFDirectionsRenderer\n      {...this.props}\n      originPOIOptions={originPOIOptions}\n      destinationPOIOptions={destinationPOIOptions}\n      ref={this._ref}\n      onPress={this._onPress}\n    />;\n  }\n\n  _ref(ref) {\n    this.renderer = ref;\n  }\n\n  _onPress(event) {\n    event.stopPropagation();\n      if (this.props.onPress) {\n        this.props.onPress(event);\n    }\n  }\n\n  _runCommand(name, args) {\n    switch (Platform.OS) {\n      case 'android':\n        NativeModules.UIManager.dispatchViewManagerCommand(\n          this._getHandle(),\n          this._uiManagerCommand(name),\n          args\n        );\n        break;\n\n      case 'ios':\n        this._mapManagerCommand(name)(this._getHandle(), ...args);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  _getHandle() {\n    return findNodeHandle(this.renderer);\n  }\n\n  _uiManagerCommand(name) {\n    const UIManager = NativeModules.UIManager;\n    const componentName = \"RMFDirectionsRenderer\";\n\n    if (!UIManager.getViewManagerConfig) {\n      // RN < 0.58\n      return UIManager[componentName].Commands[name];\n    }\n\n    // RN >= 0.58        \n    return UIManager.getViewManagerConfig(componentName).Commands[name];\n  }\n\n  _mapManagerCommand(name) {\n    return NativeModules[`RMFDirectionsRenderer`][name];\n  }\n}\n\nMFDirectionsRenderer.propTypes = propTypes;\n\nvar RMFDirectionsRenderer = requireNativeComponent(`RMFDirectionsRenderer`, MFDirectionsRenderer);\n\nexport { MFDirectionsRenderer }\n"],"mappings":"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"}